{"version":3,"sources":["webpack://Vue/webpack/universalModuleDefinition","webpack://Vue/./compiler.js","webpack://Vue/./dep.js","webpack://Vue/./init.js","webpack://Vue/./observer.js","webpack://Vue/./render.js","webpack://Vue/./vdom.js","webpack://Vue/./vue.js","webpack://Vue/./watcher.js","webpack://Vue/webpack/bootstrap","webpack://Vue/webpack/runtime/define property getters","webpack://Vue/webpack/runtime/hasOwnProperty shorthand","webpack://Vue/webpack/runtime/make namespace object","webpack://Vue/webpack/startup"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;;;ACVO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,SAAS,YAAY,EAAE;AAC/C,sBAAsB,MAAM,aAAa,EAAE;AAC3C;AACA;AACA;AACA;;AAEA;;AAEA;;;;;;;;;;;;;;;;;;;;;;;ACnBe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC3BoC;;AAE7B;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH,EAAE,mDAAO;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH;;;;;;;;;;;;;;;;;;;;;;ACvCuB;;AAEhB;AACP;AACA;AACA,mBAAmB,yCAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA,kBAAkB,yCAAG;AACrB;AACA;AACA;AACA;AACA;AACA,UAAU,gDAAU;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;;;;;;;;;;AClE+C;;AAExC;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kBAAkB,0CAAK;AACvB,KAAK;AACL;AACA;AACA;AACA,kBAAkB,0CAAK;AACvB;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;;AAEO;AACP;AACA,cAAc,kDAAe;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;ACzCe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;;;;;;;;;;;;;;;;;;;;;;;ACZ+B;AACgB;AACb;AACG;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,oDAAU;AACZ;AACA,EAAE,iDAAS;AACX;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,6DAAkB;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,6CAAO,8BAA8B;;AAE3C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iEAAe,GAAG;;;;;;;;;;;;;;;;;;;;ACjDgC;;AAElD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,IAAI,gDAAU;AACd;AACA,IAAI,gDAAS;AACb;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,iEAAe,OAAO;;;;;;;UCpCtB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCrBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,sF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;UCNA;UACA;UACA;UACA","file":"vue.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vue\"] = factory();\n\telse\n\t\troot[\"Vue\"] = factory();\n})(self, function() {\nreturn ","export function compileToFunctions(template) {\n  // 编译模板\n  console.log('compileToFunctions')\n\n  // 1. parse => ast\n  const ast = parse(template.trim())\n  // 2. ast => generate => code\n  const code = generate(ast)\n  return new Function(`\n    with (this) {\n      return _c('div', { attrs: { id: 'app' } }, [\n        _c('button', { on: { click: add } }, [_v(_s(count))]),\n      ])\n    }\n  `)\n}\n\nfunction parse() {}\n\nfunction generate(ast) {}\n","export default class Dep {\n  constructor() {\n    this.subs = []\n  }\n  addSub(sub) {\n    this.subs.push(sub)\n  }\n  depend() {\n    Dep.target.addDep(this)\n  }\n  notify() {\n    this.subs.forEach((sub) => {\n      sub.update()\n    })\n  }\n}\nDep.target = null\nconst targetStack = []\n\nexport function pushTarget(target) {\n  targetStack.push(target)\n  Dep.target = target\n}\n\nexport function popTarget() {\n  targetStack.pop()\n  Dep.target = targetStack[targetStack.length - 1]\n}\n","import { observe } from './observer'\n\nexport function initState(vm) {\n  const opts = vm.$options\n  if (opts.props) initProps(vm, opts.props)\n  if (opts.methods) initMethods(vm, opts.methods)\n  if (opts.data) initData(vm)\n  if (opts.computed) initComputed(vm, opts.computed)\n  if (opts.watch) initWatch(vm, opts.watch)\n}\n\nfunction initProps(vm, props) {}\nfunction initMethods(vm, methods) {\n  Object.keys(methods).forEach((key) => {\n    vm[key] = vm.$options.methods[key].bind(vm)\n  })\n}\nfunction initData(vm) {\n  let data = vm.$options.data\n  data = vm._data = typeof data === 'function' ? data() : data || {}\n\n  Object.keys(data).forEach((key) => {\n    proxy(vm, '_data', key)\n  })\n\n  observe(data)\n}\nfunction initComputed(vm, computeds) {}\nfunction initWatch(vm, watches) {}\n\nfunction proxy(target, sourceKey, key) {\n  Object.defineProperty(target, key, {\n    get() {\n      return target[sourceKey][key]\n    },\n    set(newVal) {\n      target[sourceKey][key] = newVal\n    },\n  })\n}\n","import Dep from './dep'\n\nexport class Observor {\n  constructor(value) {\n    this.value = value\n    this.dep = new Dep()\n    def(value, '__ob__', this)\n    if (Array.isArray(value)) {\n      // 1. 数组方法 响应式处理\n      // 2. 子项继续递归\n      value.forEach((item) => {\n        observe(item)\n      })\n    } else {\n      this.walk(value)\n    }\n  }\n  walk(value) {\n    Object.keys(value).forEach((key) => {\n      defineReactive(value, key)\n    })\n  }\n}\n\nexport function observe(value) {\n  if (!value || typeof value !== 'object') return\n  return new Observor(value)\n}\n\nfunction defineReactive(obj, key) {\n  const dep = new Dep()\n  let val = obj[key]\n  let childOb = observe(val)\n  Object.defineProperty(obj, key, {\n    get() {\n      console.log('get', key, val)\n      if (Dep.target) {\n        dep.depend()\n        if (childOb) {\n          childOb.dep.depend()\n          if (Array.isArray(value)) {\n            value.forEach((item) => {\n              observe(item)\n            })\n          }\n        }\n      }\n      return val\n    },\n    set(newVal) {\n      console.log('set', key, val)\n      if (newVal === val) return\n      val = newVal\n      childOb = observe(newVal)\n      dep.notify()\n    },\n  })\n}\n\nfunction def(obj, key, val, enumerable) {\n  Object.defineProperty(obj, key, {\n    value: val,\n    enumerable: !!enumerable,\n    writable: true,\n    configurable: true,\n  })\n}\n","import VNode, { createTextVNode } from './vdom'\n\nexport function initRender(vm) {\n  installRenderHelpers(vm) // 源码在 renderMixin(Vue) 时安装\n\n  vm._c = (a, b, c, d) => createElement(vm, a, b, c)\n}\n\nfunction createElement(context, tag, data, children) {\n  let vnode\n  if (typeof tag === 'string') {\n    // 源码定义了 isReservedTag 在 src/platforms/web/util/element.js\n    if (['div,button,span'].includes(tag)) {\n      vnode = new VNode(tag, data, children, undefined, context)\n    } else {\n      // unknown or unlisted namespaced elements\n      // check at runtime because it may get assigned a namespace when its\n      // parent normalizes children\n      vnode = new VNode(tag, data, children, undefined, context)\n    }\n  } else {\n    // direct component options / constructor 创建组件\n    vnode = createComponent(tag, data, context, children)\n  }\n  return vnode\n}\n\nfunction createComponent(tag, data, context, children) {}\n\nexport function installRenderHelpers(target) {\n  target._s = toString\n  target._v = createTextVNode\n}\n\nfunction toString(val) {\n  return val == null\n    ? ''\n    : Array.isArray(val) ||\n      Object.prototype.toString.call(val).slice(8, -1) === 'Object'\n    ? JSON.stringify(val, null, 2)\n    : String(val)\n}\n","export default class VNode {\n  constructor(tag, data, children, text, context) {\n    this.tag = tag\n    this.data = data\n    this.children = children\n    this.text = text\n    this.context = context\n  }\n}\n\nexport function createTextVNode(val) {\n  return new VNode(undefined, undefined, undefined, String(val))\n}\n","import Watcher from './watcher'\nimport { compileToFunctions } from './compiler'\nimport { initState } from './init'\nimport { initRender } from './render'\n\nfunction Vue(options) {\n  this._watcher = null\n  this._watchers = []\n  this._init(options)\n}\nVue.prototype._init = function (options) {\n  this.$options = options\n  const vm = this\n  initRender(vm) // $slots, $scopedSlots, _c, $createElement, $attrs, $listeners\n  // callHook(vm, 'beforeCreate')\n  initState(vm)\n  // callHook(vm, 'created')\n  this.$mount(options.el)\n}\n\nVue.prototype.$mount = function (el) {\n  el = document.querySelector(el)\n  this.$options.render = compileToFunctions(el.outerHTML)\n  return this.mountComponent(this, el)\n}\n\nVue.prototype.mountComponent = function (vm, el) {\n  this.$el = el\n  // callHook(vm, 'beforeMount')\n  let updateComponent = function () {\n    vm._update(vm._render())\n  }\n  new Watcher(vm, updateComponent, noop, {}, true)\n\n  // callHook(vm, 'mounted')\n}\n\nVue.prototype._render = function () {\n  console.log('render: get vnode')\n  const vm = this\n  const vnode = vm.$options.render.call(vm, vm.$createElement)\n  return vnode\n}\n\nVue.prototype._update = function (vnode) {\n  console.log('update: vnode => dom', vnode)\n}\n\nfunction noop() {}\nexport default Vue\n","import Dep, { pushTarget, popTarget } from './dep'\n\nlet uid = 0\nclass Watcher {\n  constructor(vm, expOrFn, cb, options, isRenderWatcher) {\n    this.vm = vm\n    this.cb = cb\n    this.id = ++uid\n    this.deps = []\n    if (isRenderWatcher) {\n      vm._watcher = this\n    }\n    vm._watchers.push(this)\n\n    if (typeof expOrFn === 'function') {\n      this.getter = expOrFn\n    }\n\n    this.value = this.get()\n  }\n\n  get() {\n    pushTarget(this)\n    let value = this.getter.call(this.vm, this.vm)\n    popTarget(this)\n  }\n\n  addDep(dep) {\n    dep.addSub(this)\n  }\n\n  update() {\n    this.cb.call(vm)\n  }\n}\n\nexport default Watcher\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(\"./vue.js\");\n"],"sourceRoot":""}